---
title: Journey into new Web tech
description: none
pubDate: 2024-06-20T13:00:13.000-05:00
heroImage: http://ghostcms.meikos.internal/content/images/2024/06/software-5.jpg
excerpt: Today's web offers many new technologies, the core of which is to employ a Content Management tool that the site owner can edit their content.
author: Mike Sanders
minRead: 5 min
nextPost: ready-set-site-launch
prevPost: ready-set-site-launch
---
<p>Today's web offers many new technologies, the core of which is to employ a Content Management tool that the site owner can edit their content. From a development perspective, the next steps would be to pull that content, code the client side scripts and then finally to serve it as a web application.</p><p>While there are many tools to accomplish the above, the remainder of this post will outline the tools I chose to develop a site. Another goal is to re-use such work for creating any web applications for prospective clients. For content management, I decided upon Ghost CMS and for Static Site generation, I decided upon Astro.</p><h3 id="ghost-cms">Ghost CMS</h3><p>Besides the installation located <a href="https://ghost.org/docs/install/?ref=ghostcms.meikos.internal" rel="noreferrer">here</a>, the next step with using Ghost CMS, would be to create or use a theme. This has a learning curve to it if creating a new theme. Ghost themes are written using <a href="https://handlebarsjs.com/?ref=ghostcms.meikos.internal" rel="noreferrer">Handlebars</a>, another templating language to learn if you have not already done so. Most of the existing themes I have looked at also use gulp to concatenate the CSS files. Ghost has some pretty good <a href="https://ghost.org/docs/themes/?ref=ghostcms.meikos.internal" rel="noreferrer">documentation on creating themes</a>.</p><p>I have a working theme that I uploaded to <a href="https://github.com/devdog66/meikos-ghost-theme?ref=ghostcms.meikos.internal" rel="noreferrer">git hub</a> so that the reader can follow along for the rest of the post. </p><p>A good practice that I have seen many ghost theme authors do, is to separate concerns meaning to have separate CSS files for certain areas or components of a site. An example of how I did this is below.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="http://ghostcms.meikos.internal/content/images/2024/06/image-3.png" class="kg-image" alt="Separation of concerns for CSS files" loading="lazy" width="304" height="443" /><figcaption><span style="white-space:pre-wrap">Separation of concerns for CSS files</span></figcaption></figure><p>One CSS file, I chose to name it main.css, imports the other CSS files that gulp will concatenate and minify. Here is how my main.css file looks.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="http://ghostcms.meikos.internal/content/images/2024/06/image-4.png" class="kg-image" alt="main.css" loading="lazy" width="417" height="279" /><figcaption><span style="white-space:pre-wrap">main.css</span></figcaption></figure><p>Some may find some limitations with Ghost about theming. One such limitation would be with navigation links. Out of the box, there are no multi-level capabilities nor are there ways to assign icons to links if desired. Therefore, I made the choice to hard code the navigation for a site using some placeholders. Another limitation is the seemingly lack of ability to preview the theme. I have tried the <a href="https://www.npmjs.com/package/express-handlebars?ref=ghostcms.meikos.internal" rel="noreferrer">express-handlebars</a> package to do this, however ran into roadblocks with Ghost specific variables and statements. I may revisit that attempt later. Right now the only way I see to preview is to zip up the theme files and upload to the Ghost admin location. Then you can preview it on Ghost.</p><p>The project is fairly simple with the following npm steps outlined below</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="http://ghostcms.meikos.internal/content/images/2024/06/image.png" class="kg-image" alt="npm scripts" loading="lazy" width="506" height="132" /><figcaption><span style="white-space:pre-wrap">npm scripts</span></figcaption></figure><p>The first step is a utility from Ghost called gscan. This allows you to check the syntax of your .hbs files and the theme overall to make sure it adheres to a valid Ghost theme. Next is the build step that gulp will use to pack the main.css file. Now to create the theme zip file with the npm zip script. It uses gulp again to do this. I chose not to build with this step as sometimes the errors that gscan produces are not detailed enough. If one uploads the zipped theme even with errors, the Ghost admin site will provide more details as to what specifically needs to be fixed. </p><p>A final optional step is to copy the theme or assets folder to the next project in Astro. Here is the example of the main site template, default.hbs. </p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="http://ghostcms.meikos.internal/content/images/2024/06/image-2.png" class="kg-image" alt="default.hbs" loading="lazy" width="735" height="614" srcset="http://ghostcms.meikos.internal/content/images/size/w600/2024/06/image-2.png 600w, http://ghostcms.meikos.internal/content/images/2024/06/image-2.png 735w" sizes="(min-width: 720px) 720px" /><figcaption><span style="white-space:pre-wrap">default.hbs</span></figcaption></figure><h3 id="astro-ssg">Astro SSG</h3><p>As of now, I have a Ghost instance with a theme of my liking and I have created the content on my Ghost instance. My next goal is to pull the content from Ghost CMS and to create the static assets needed for a web site. This is where Astro comes in. I have uploaded another repo to <a href="https://github.com/devdog66/meikos-astro?ref=ghostcms.meikos.internal" rel="noreferrer">git hub</a> for the user to follow along with. </p><p>The project structure looks like the following.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="http://ghostcms.meikos.internal/content/images/2024/06/image-5.png" class="kg-image" alt="Project structure" loading="lazy" width="320" height="471" /><figcaption><span style="white-space:pre-wrap">Project structure</span></figcaption></figure><p>The public folder mostly contains the assets sub folder copied from the ghost theme. The src folder is broken down into the following:</p>
<ul>
<li>
<p>components = <em>Reusable parts to be included in layouts or pages.</em></p>
</li>
<li>
<p>content    = <em>The folder where blogs and pages will be imported to. This follows Astro's content collections instructions.</em></p>
</li>
<li>
<p>importer   = <em>This has the script used for importing content.</em></p>
</li>
<li>
<p>layouts    = <em>This has the main layout for the site. Can include multiple layouts if desired.</em></p>
</li>
<li>
<p>pages      = <em>This contains slugs to render pages or posts.</em></p>
</li>
</ul>
<p>The meat of the project is with the importer/index.ts script. It uses an API that needs to be setup in the Ghost instance with an API Key. In order to get Astro and Ghost to work together nicely, some workarounds were needed for this step.</p><p>Ghost exports it's format as HTML. Astro is built for Markdown. Therefore the exported content should be stored as .MDX files to work. Next workaround is with the fact that Ghost does not always export well-formed HTML and therefore I was forced to use a tool like <a href="https://www.npmjs.com/package/sanitize-html?ref=ghostcms.meikos.internal" rel="noreferrer">sanitize-html </a>to take care of that. I had to use it like below.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="http://ghostcms.meikos.internal/content/images/2024/06/image-7.png" class="kg-image" alt="index.ts snippet" loading="lazy" width="644" height="147" srcset="http://ghostcms.meikos.internal/content/images/size/w600/2024/06/image-7.png 600w, http://ghostcms.meikos.internal/content/images/2024/06/image-7.png 644w" /><figcaption><span style="white-space:pre-wrap">index.ts snippet</span></figcaption></figure><p>The layout is pretty simple and mirrors what was used with the default layout for the Ghost theme.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="http://ghostcms.meikos.internal/content/images/2024/06/image-8.png" class="kg-image" alt="layouts/Page.astro" loading="lazy" width="764" height="594" srcset="http://ghostcms.meikos.internal/content/images/size/w600/2024/06/image-8.png 600w, http://ghostcms.meikos.internal/content/images/2024/06/image-8.png 764w" sizes="(min-width: 720px) 720px" /><figcaption><span style="white-space:pre-wrap">layouts/Page.astro</span></figcaption></figure><p>The page slug looks like the following and shows how to use the 'page' content collection. </p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="http://ghostcms.meikos.internal/content/images/2024/06/image-9.png" class="kg-image" alt="" loading="lazy" width="995" height="600" srcset="http://ghostcms.meikos.internal/content/images/size/w600/2024/06/image-9.png 600w, http://ghostcms.meikos.internal/content/images/2024/06/image-9.png 995w" sizes="(min-width: 720px) 720px" /><figcaption><span style="white-space:pre-wrap">pages/page/[...slug].astro</span></figcaption></figure><p>All of this results in a beautiful cover page for a new web site.</p><figure class="kg-card kg-image-card"><img src="http://ghostcms.meikos.internal/content/images/2024/06/image-10.png" class="kg-image" alt="" loading="lazy" width="1226" height="747" srcset="http://ghostcms.meikos.internal/content/images/size/w600/2024/06/image-10.png 600w, http://ghostcms.meikos.internal/content/images/size/w1000/2024/06/image-10.png 1000w, http://ghostcms.meikos.internal/content/images/2024/06/image-10.png 1226w" sizes="(min-width: 720px) 720px" /></figure><p>And there is a list of recent blog posts, including this one. Talk about eating your own dog food.</p><figure class="kg-card kg-image-card"><img src="http://ghostcms.meikos.internal/content/images/2024/06/image-11.png" class="kg-image" alt="" loading="lazy" width="1220" height="741" srcset="http://ghostcms.meikos.internal/content/images/size/w600/2024/06/image-11.png 600w, http://ghostcms.meikos.internal/content/images/size/w1000/2024/06/image-11.png 1000w, http://ghostcms.meikos.internal/content/images/2024/06/image-11.png 1220w" sizes="(min-width: 720px) 720px" /></figure>